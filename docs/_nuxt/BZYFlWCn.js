import{_ as z,aa as ue,c as i,o,d as s,l as d,F as S,r as B,ab as $,a5 as F,a6 as X,ac as L,n as x,a0 as y,ad as ce,j as k,Y as _,w as p,a3 as b,e as a,a as u,i as he,ae as me,a2 as pe,u as ge,T as fe,W as ve,af as be,f as ye,t as m,b as Z,a4 as we,g as H}from"./BjVGRr6Z.js";import{_ as $e}from"./r3GfVRy5.js";import{_ as ke}from"./DsY0qfm0.js";import{_ as Se}from"./BtZ_QgUD.js";function V(e,t){return t?{width:window.innerWidth,height:window.innerHeight,left:0,top:0}:e.getBoundingClientRect()}function Y(e,t){return e&&window.matchMedia&&window.matchMedia(`(max-width: ${t}px)`).matches}function R(){return{onLoadCallback:null,bounds:{},offsets:{},ratios:{},eventPosition:{},scaledDimensions:{}}}function A(e,t,n,r){return{x:e-n,y:t-r}}function ze(e,t){return{x:(t.width-e.width)/e.width,y:(t.height-e.height)/e.height}}function Me(e,t){return{width:e.naturalWidth*t,height:e.naturalHeight*t}}function q(e){return{x:typeof e.pageX=="number"?e.pageX:e.changedTouches[0].pageX,y:typeof e.pageY=="number"?e.pageY:e.changedTouches[0].pageY}}function De(e,t,n){const r=(e.pageX-(window.pageXOffset+t.bounds.left))*-t.ratios.x,c=(e.pageY-(window.pageYOffset+t.bounds.top))*-t.ratios.y;return{pageX:r+(n?(window.innerWidth-t.bounds.width)/2:0),pageY:c+(n?(window.innerHeight-t.bounds.height)/2:0)}}function _e(e,t){const n=Math.abs(e.pageX-t.eventPosition.x),r=Math.abs(e.pageY-t.eventPosition.y);return n>5||r>5}function Te(e,t){const n=j(e,t);return{left:Math.max(Math.min(n.x,t.bounds.width),0)*-t.ratios.x,top:Math.max(Math.min(n.y,t.bounds.height),0)*-t.ratios.y}}function Ce(e,t){const n=j(e,t);return{left:Math.max(Math.min(n.x,0),(t.scaledDimensions.width-t.bounds.width)*-1),top:Math.max(Math.min(n.y,0),(t.scaledDimensions.height-t.bounds.height)*-1)}}function j(e,t){const n=q(e);return{x:n.x-t.offsets.x,y:n.y-t.offsets.y}}const Pe=ue({name:"InnerImageZoom",props:{moveType:{type:String,default:"pan"},zoomType:{type:String,default:"click"},src:{type:String,required:!0},imgAttributes:{type:Object,default:{}},sources:Array,width:Number,height:Number,hasSpacer:Boolean,zoomSrc:String,zoomScale:{type:Number,default:1},zoomPreload:Boolean,fadeDuration:{type:Number,default:150},fullscreenOnMobile:Boolean,mobileBreakpoint:{type:Number,default:640},hideHint:Boolean,hideCloseButton:Boolean,className:String,afterZoomIn:Function,afterZoomOut:Function},data(){return{isActive:this.zoomPreload||!1,isTouch:!1,isZoomed:!1,isFullscreen:!1,isDragging:!1,currentMoveType:this.moveType,left:0,top:0,imgProps:{}}},created(){this.imgProps=R(),Y(this.fullscreenOnMobile,this.mobileBreakpoint)&&(this.isActive=!1)},computed:{validSources:function(){return this.sources?this.sources.filter(e=>e.srcSet):[]},createSpacer:function(){return this.width&&this.height&&this.hasSpacer}},methods:{handleMouseEnter(e){this.isActive=!0,this.zoomType==="hover"&&!this.isZoomed&&this.handleClick(e)},handleTouchStart(){this.isTouch=!0,this.isFullscreen=Y(this.fullscreenOnMobile,this.mobileBreakpoint),this.currentMoveType="drag"},handleClick(e){if(this.isZoomed){this.isTouch?this.hideCloseButton&&this.handleClose():!this.isDragging&&this.zoomOut();return}this.isTouch&&(this.isActive=!0),this.imgProps.zoomImg?(this.handleLoad({target:this.imgProps.zoomImg}),this.zoomIn(e)):this.imgProps.onLoadCallback=this.zoomIn.bind(this,e)},handleLoad(e){const t=Me(e.target,this.zoomScale);this.imgProps.zoomImg=e.target,this.imgProps.zoomImg.setAttribute("width",t.width),this.imgProps.zoomImg.setAttribute("height",t.height),this.imgProps.scaledDimensions=t,this.imgProps.bounds=V(this.$refs.img,!1),this.imgProps.ratios=ze(this.imgProps.bounds,t),this.imgProps.onLoadCallback&&(this.imgProps.onLoadCallback(),this.imgProps.onLoadCallback=null)},handleMouseMove(e){const t=Te(e,this.imgProps);this.left=t.left,this.top=t.top},handleDragStart(e){const t=q(e);this.imgProps.offsets=A(t.x,t.y,this.imgProps.zoomImg.offsetLeft,this.imgProps.zoomImg.offsetTop),this.imgProps.zoomImg.addEventListener(this.isTouch?"touchmove":"mousemove",this.handleDragMove,{passive:!0}),this.isTouch||(this.imgProps.eventPosition=t)},handleDragMove(e){const t=Ce(e,this.imgProps);this.left=t.left,this.top=t.top},handleDragEnd(e){this.imgProps.zoomImg.removeEventListener(this.isTouch?"touchmove":"mousemove",this.handleDragMove),this.isTouch||(this.isDragging=_e(e,this.imgProps))},handleMouseLeave(e){this.currentMoveType==="drag"&&this.isZoomed?this.handleDragEnd(e):this.handleClose()},handleClose(){this.zoomOut(()=>{setTimeout(()=>{(this.zoomPreload&&this.isTouch||!this.zoomPreload)&&(this.isActive=!1,this.imgProps=R()),this.isTouch=!1,this.isFullscreen=!1,this.currentMoveType=this.moveType},this.isFullscreen?0:this.fadeDuration)})},initialMove(e){this.imgProps.offsets=A(window.pageXOffset,window.pageYOffset,-this.imgProps.bounds.left,-this.imgProps.bounds.top),this.handleMouseMove(e)},initialDragMove(e){const t=De(e,this.imgProps,this.isFullscreen);this.imgProps.bounds=V(this.$refs.img,this.isFullscreen),this.imgProps.offsets=A(0,0,0,0),this.handleDragMove({...t,preventDefault:()=>{},stopPropagation:()=>{}})},zoomIn(e){this.isZoomed=!0,this.currentMoveType==="drag"?this.initialDragMove(e):this.initialMove(e),this.afterZoomIn&&this.afterZoomIn()},zoomOut(e){this.isZoomed=!1,this.afterZoomOut&&this.afterZoomOut(),e&&e()}}}),Ie={key:0},Fe=["src","width","height"],Le=["src","width","height"],Ze={class:"iiz__zoom-portal"},Ae=["src"],Be=["src"],Oe={key:1,class:"iiz__btn iiz__hint"};function Ne(e,t,n,r,c,h){return o(),i("figure",$({class:["iiz",{...e.className&&{[e.className]:e.className},"iiz--drag":e.currentMoveType==="drag"}],ref:"img",style:{width:`${e.width}px`}},L({touchstart:e.isZoomed?()=>{}:e.handleTouchStart,click:e.handleClick,mouseenter:e.isTouch?()=>{}:e.handleMouseEnter,mousemove:e.currentMoveType==="drag"||!e.isZoomed?()=>{}:e.handleMouseMove,mouseleave:e.isTouch?()=>{}:e.handleMouseLeave},!0)),[s("div",{style:F({paddingTop:e.createSpacer?`${(e.height||0)/(e.width||0)*100}%`:void 0})},[e.validSources?(o(),i("picture",Ie,[(o(!0),i(S,null,B(e.validSources,(l,T)=>(o(),i("source",$({key:T,ref_for:!0},l),null,16))),128)),s("img",$(e.imgAttributes,{class:["iiz__img",[e.imgAttributes.className||"",{"iiz__img--hidden":e.isZoomed,"iiz__img--abs":e.createSpacer}]],style:{transition:`linear 0ms opacity ${e.isZoomed?e.fadeDuration:0}ms, linear 0ms visibility ${e.isZoomed?e.fadeDuration:0}ms`},src:e.src,width:e.width,height:e.height}),null,16,Fe)])):(o(),i("img",$({key:1},e.imgAttributes,{class:["iiz__img",[e.imgAttributes.className||"",{"iiz__img--hidden":e.isZoomed,"iiz__img--abs":e.createSpacer}]],style:{transition:`linear 0ms opacity ${e.isZoomed?e.fadeDuration:0}ms, linear 0ms visibility ${e.isZoomed?e.fadeDuration:0}ms`},src:e.src,width:e.width,height:e.height}),null,16,Le))],4),e.isActive?(o(),i(S,{key:0},[e.isFullscreen?(o(),X(ce,{key:0,to:"body"},[s("div",Ze,[s("img",$({class:["iiz__zoom-img",{"iiz__zoom-img--visible":e.isZoomed}],alt:"",draggable:!1,style:{top:`${e.top}px`,left:`${e.left}px`,transition:`linear ${e.isFullscreen?0:e.fadeDuration}ms opacity, linear ${e.isFullscreen?0:e.fadeDuration}ms visibility`},src:e.zoomSrc||e.src},L({load:e.handleLoad,touchstart:e.handleDragStart,touchend:e.handleDragEnd,mousedown:e.handleDragStart,mouseup:e.handleDragEnd,click:e.handleClick},!0)),null,16,Ae),!e.hideCloseButton&&e.currentMoveType==="drag"?(o(),i("button",{key:0,type:"button",class:y(["iiz__btn iiz__close",{"iiz__close--visible":e.isZoomed}]),"aria-label":"Zoom Out",style:F({transition:`linear ${e.isFullscreen?0:e.fadeDuration}ms opacity, linear ${e.isFullscreen?0:e.fadeDuration}ms visibility`}),onClick:t[0]||(t[0]=x((...l)=>e.handleClose&&e.handleClose(...l),["stop"]))},null,6)):d("",!0)])])):(o(),i(S,{key:1},[s("img",$({class:["iiz__zoom-img",{"iiz__zoom-img--visible":e.isZoomed}],alt:"",draggable:!1,style:{top:`${e.top}px`,left:`${e.left}px`,transition:`linear ${e.isFullscreen?0:e.fadeDuration}ms opacity, linear ${e.isFullscreen?0:e.fadeDuration}ms visibility`},src:e.zoomSrc||e.src},L({load:e.handleLoad,touchstart:e.handleDragStart,touchend:e.handleDragEnd,mousedown:e.handleDragStart,mouseup:e.handleDragEnd},!0)),null,16,Be),!e.hideCloseButton&&e.currentMoveType==="drag"?(o(),i("button",{key:0,class:y(["iiz__btn iiz__close",{"iiz__close--visible":e.isZoomed}]),type:"button","aria-label":"Zoom Out",style:F({transition:`linear ${e.isFullscreen?0:e.fadeDuration}ms opacity, linear ${e.isFullscreen?0:e.fadeDuration}ms visibility`}),onClick:t[1]||(t[1]=x((...l)=>e.handleClose&&e.handleClose(...l),["stop"]))},null,6)):d("",!0)],64))],64)):d("",!0),!e.isZoomed&&!e.hideHint?(o(),i("span",Oe)):d("",!0)],16)}const Ee=z(Pe,[["render",Ne],["__scopeId","data-v-915d2827"]]),xe={class:"flex flex-col"},He=["src"],Ve={class:"w-full h-5 bg-[#FFF9F1]"},Ye={__name:"PostImage",props:{imageSrc:{type:Object}},setup(e){const t=k(!1),n=k(!1),r=h=>{t.value=!0;const{naturalWidth:l}=h.target;n.value=l>476},c=_(()=>{const l=e.imageSrc.alt.replace(/\.[^/.]+$/,"").replace(/-/g," ");return l[0].toUpperCase()+l.slice(1)});return(h,l)=>(o(),i(S,null,[p(u(a($e),null,null,512),[[b,!a(t)]]),s("div",xe,[u(a(Ee),{class:y(["opacity-0",{hidden:!a(t),"block fade-in":a(t)}]),src:e.imageSrc.src,alt:a(c),mobileBreakpoint:576,fullscreenOnMobile:!1,hideCloseButton:!0,hideHint:!0},null,8,["class","src","alt"]),s("img",{src:e.imageSrc.src,onLoad:r,alt:"invisible",class:"hidden"},null,40,He),p(s("div",Ve,null,512),[[b,!a(n)]])])],64))}},Re=z(Ye,[["__scopeId","data-v-ad0438fb"]]),Xe={name:"SiZoomInFill"},qe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"};function je(e,t,n,r,c,h){return o(),i("svg",qe,t[0]||(t[0]=[s("path",{fillRule:"evenodd",d:"M11 19a7.97 7.97 0 0 0 4.906-1.68l4.387 4.387a1 1 0 0 0 1.414-1.414l-4.387-4.387A8 8 0 1 0 11 19m0-12a1 1 0 0 1 1 1v2h2a1 1 0 1 1 0 2h-2v2a1 1 0 1 1-2 0v-2H8a1 1 0 1 1 0-2h2V8a1 1 0 0 1 1-1",clipRule:"evenodd"},null,-1)]))}const We=z(Xe,[["render",je]]),Ue={name:"MaterialSymbolsContentCopy"},Ge={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"};function Je(e,t,n,r,c,h){return o(),i("svg",Ge,t[0]||(t[0]=[s("path",{d:"M9 18q-.825 0-1.412-.587T7 16V4q0-.825.588-1.412T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.587 1.413T18 18zm-4 4q-.825 0-1.412-.587T3 20V6h2v14h11v2z"},null,-1)]))}const Ke=z(Ue,[["render",Je]]),Qe={name:"IcBaselineShare"},et={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"};function tt(e,t,n,r,c,h){return o(),i("svg",et,t[0]||(t[0]=[s("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81c1.66 0 3-1.34 3-3s-1.34-3-3-3s-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65c0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92"},null,-1)]))}const st=z(Qe,[["render",tt]]),ot={key:0,class:"flex flex-col p-3 shadow rounded-md bg-[#FFF9F1]"},it={key:0,class:"relative max-h-[476px]"},nt={key:0,class:"w-0 h-0"},at={key:1,class:"flex gap-[2px] items-center mt-[2px] justify-center"},lt={class:"text-xs text-@black/40"},rt={key:2,class:"flex gap-1 justify-center mt-4"},dt={key:3,class:"font-light text-@black/60 italic mb-5"},ut={key:0},ct=["innerHTML"],ht={class:"font-bold"},mt=["innerHTML"],pt={class:"flex flex-col"},gt={class:"fade-in opacity-0 bg-gradient-to-t from-[#FFF9F1] w-full h-6 -mt-6 z-10"},ft={class:"relative flex items-center h-10 mt-3"},vt={class:"flex gap-2 absolute right-0"},bt={key:0},yt={key:4,class:"flex flex-col mt-6"},wt={class:"flex flex-col gap-1"},$t={class:"flex flex-col items-center mt-2"},kt={class:"w-fit"},St={class:"w-fit"},zt={class:"text-@red"},Mt={class:"text-@blue"},Dt={__name:"Post",props:{post:{type:Object}},setup(e){const t=e,{$user:n,$sanitize:r}=he(),{share:c,isSupported:h}=me(),{width:l}=pe(),{deletePost:T}=ge(),W=fe(),g=k(null),f=k(1),U=typeof t.post.createdAt!="string"?t.post.createdAt.toDate().toLocaleString("pt-BR"):t.post.createdAt,G=typeof t.post.updatedAt!="string"?t.post.updatedAt.toDate().toLocaleString("pt-BR"):t.post.updatedAt,O=_(()=>({createdAtValue:U,updatedAtValue:G})),N=r(t.post.description),M=k(!1),J=_(()=>N.slice(0,115)),K=async(D,v)=>{await T(D,v,"posts")};ve(()=>{g.value&&g.value.addEventListener("scroll",E)}),be(()=>{g.value&&g.value.removeEventListener("scroll",E)});const C=_(()=>l.value<=480?336:476),E=()=>{const D=Math.round(g.value.scrollLeft/C.value);f.value=D+1},Q=()=>{g.value.scrollLeft+=C.value,f.value<t.post.imagesSrc.length&&(f.value+=1)},ee=()=>{g.value.scrollLeft-=C.value,f.value>1&&(f.value-=1)},P=k(!1),te=async()=>{await navigator.clipboard.writeText(`https://oifabio.com.br/posts/${t.post.slug}`),P.value=!0,setTimeout(()=>P.value=!1,400)},se=()=>{c({title:"Fabio BS",text:"Fabio BS • Portfolio",url:`/posts/${t.post.slug}`})};return(D,v)=>{const oe=Re,ie=ke,ne=Se,ae=We,I=we,le=Ke,re=st,de=ye("auto-animate");return e.post?(o(),i("div",ot,[e.post.imagesSrc.length>0?(o(),i("section",it,[s("ul",{class:"wrapper",ref_key:"wrapper",ref:g},[(o(!0),i(S,null,B(e.post.imagesSrc,w=>(o(),i("li",{key:w.path,class:"snap-center overflow-y-hidden min-w-[476px] min-h-[476px] sm:min-w-[336px] sm:min-h-[336px] flex items-center justify-center"},[u(oe,{imageSrc:w},null,8,["imageSrc"])]))),128))],512),e.post.imagesSrc.length>1?(o(),i("div",nt,[p(s("button",{onClick:ee,class:"opacity-0 fade-in"},[u(ie,{class:"absolute left-0 top-1/2 fill-@black/40 text-3xl -ml-2"})],512),[[b,a(f)!=1]]),p(s("button",{onClick:Q,class:"opacity-0 fade-in"},[u(ne,{class:"absolute right-0 top-1/2 fill-@black/40 text-3xl -mr-2"})],512),[[b,a(f)!=e.post.imagesSrc.length]])])):d("",!0)])):d("",!0),e.post.imagesSrc.length>0?(o(),i("div",at,[s("small",lt,m(a(l)>768?"click na imagem para ampliar":"toque na imagem para ampliar"),1),u(ae,{class:"fill-@black/30"})])):d("",!0),e.post.imagesSrc.length>1?(o(),i("ul",rt,[(o(!0),i(S,null,B(e.post.imagesSrc.length,w=>(o(),i("li",null,[s("div",{class:y(["w-2 h-2 rounded-full transition-all duration-300",w===a(f)?"bg-@black scale-125":"bg-@black/25"])},null,2)]))),256))])):d("",!0),u(I,{to:`/posts/${e.post.slug}`,class:"w-fit mt-5"},{default:Z(()=>[s("h2",{class:y(["relative title text-pretty after:opacity-40 after:ml-1 after:absolute after:bottom-2 after:content-[url('~/assets/icons/icon-open.svg')]",e.post.isActive?"":"!line-through text-@purple"])},m(e.post.headline),3)]),_:1},8,["to"]),e.post.subheadline?(o(),i("h3",dt,m(e.post.subheadline),1)):d("",!0),p((o(),i("div",null,[a(M)?(o(),i("p",{key:1,lang:"pt-BR",class:"",innerHTML:a(N)},null,8,mt)):(o(),i("div",ut,[s("p",{lang:"pt-BR",class:y(["inline",{"line-through":!e.post.isActive}]),innerHTML:a(J)},null,10,ct),p(s("span",ht," ... ",512),[[b,e.post.description.length>114]])]))])),[[de,{duration:300}]]),p(s("div",pt,[p(s("div",gt,null,512),[[b,!a(M)]])],512),[[b,e.post.description.length>114]]),p(s("button",{class:"mt-2 font-bold",onClick:v[0]||(v[0]=w=>M.value=!a(M))},m(a(M)?"leia menos":"leia mais"),513),[[b,e.post.description.length>114]]),s("div",ft,[a(W).name!==e.post.tag?(o(),X(I,{key:0,class:"italic font-light text-@black/60 absolute left-0 flex items-center gap-1",to:{name:e.post.tag}},{default:Z(()=>[H(" mais #"+m(e.post.tag),1)]),_:1},8,["to"])):d("",!0),s("div",vt,[s("button",null,[u(le,{onClick:te,class:y(["text-3xl fill-@black/25 cursor-pointer transition-all",{"fill-@blue text-4xl":a(P)}])},null,8,["class"])]),a(h)?(o(),i("button",bt,[u(re,{onClick:se,class:"text-3xl fill-@black/25 cursor-pointer"})])):d("",!0)])]),a(n)?(o(),i("div",yt,[s("div",wt,[u(I,{to:{name:"post",query:{id:e.post.id}},class:"btn hover:bg-@blue text-center"},{default:Z(()=>v[2]||(v[2]=[H(" Update Post ")])),_:1},8,["to"]),s("button",{onClick:v[1]||(v[1]=w=>K(e.post.id,e.post.imagesSrc)),class:"btn hover:bg-@red"}," Delete Post and Images ")]),s("div",$t,[s("small",kt,"Post ID: "+m(e.post.id),1),s("small",St," Post priority: "+m(e.post.priority),1),s("small",zt," Created: "+m(a(O).createdAtValue),1),s("small",Mt," Updated: "+m(a(O).updatedAtValue),1)])])):d("",!0)])):d("",!0)}}},It=z(Dt,[["__scopeId","data-v-01f3d2a5"]]);export{It as _};
